1    0000 ;====================================================================
2    0000 ; Main.asm file generated by New Project wizard
3    0000 ;
4    0000 ; Project:	 Traffic Light Signal - 8051
5    0000 ; Created:   Sun May 22 2022
6    0000 ; Processor: AT89C51
7    0000 ; Compiler:  ASEM-51 (Proteus)
8    0000 ; Code by:	ElektroSoft Solutions (SMC-Pvt) Ltd
9    0000 ; Website:	www.essol.com.pk
10   0000 ; Contact:	+92-302-8888-920 (WhatsApp/Call)
11   0000 ; Hardware used: 8051 mini Development Board v1.0 (made by ElektroSoft Solutions)
12   0000 ;====================================================================
13   0000 ; RESET and INTERRUPT VECTORS
14   0000 ;====================================================================
16   0000       ; Reset Vector
17   0000       org   0000h
18   0000       jmp   Start
20   0003 ;====================================================================
21   0003 ; CODE SEGMENT
22   0003 ;====================================================================
24   0003       org   0100h
25   0100 Start:	
26   0100       ; Write your code here
27   0100       MOV P0, #00H
28   0103       MOV P1, #00H
29   0106       MOV P2, #00H
30   0109       MOV P3, #00h
31   010C again:
32   010C       SETB P2.0			;Red light ON for one bi-directional road
33   010E       SETB p2.5			;Green light ON	for second intersecting bi-directional road
34   0110       CALL DELAY30		;delay for 30-35 seconds
35   0113       CLR P2.0			;OFF Red light for one bi-directional road
36   0115       CLR P2.5			;OFF Green light for second intersecting bi-directional road
37   0117       SETB P2.1			; Yellow light ON for one bi-directional road
38   0119       SETB P2.4			; Yellow light ON for second intersecting bi-directional road
39   011B       CALL DELAY15		; delay for 15 second for Yellow light
40   011E       CLR P2.1			;OFF Yellow light for one bi-directional road
41   0120       CLR P2.4			;OFF Yellow light for second intersecting bi-directional road
42   0122       SETB P2.2			;Green light ON for one bi-directional road
43   0124       SETB P2.3			;Red lighit ON for second intersecting bi-directional road
44   0126       CALL DELAY30		;delay for 30-35 seconds
45   0129       CLR P2.2			;OFF Green light for one bi-directional road
46   012B       CLR P2.3			;OFF Red lighit for second intersecting bi-directional road
48   012D       CLR P2.0			;OFF Red light for one bi-directional road
49   012F       CLR P2.5			;OFF Green light for second intersecting bi-directional road
50   0131       SETB P2.1			; Yellow light ON for one bi-directional road
51   0133       SETB P2.4			; Yellow light ON for second intersecting bi-directional road
52   0135       CALL DELAY15		; delay for 15 second for Yellow light
55   0138       SJMP again		; Repeat the sequence again
57   013A Loop:	
58   013A       jmp Loop
60   013D DELAY30:				;30-35 seconds delay routine
61   013D 		MOV R5, #255
62   013F HERE1:	MOV R4, #255
63   0141 HERE2:	MOV R3, #255
64   0143 HERE3:	DJNZ R3, HERE3
65   0145 		DJNZ R4, HERE2
66   0147 		DJNZ R5, HERE1
67   0149 		RET
69   014A DELAY15:				;15 seconds delay routine
70   014A 	    MOV R5, #100
71   014C HERE4:	MOV R4, #255
72   014E HERE5:	MOV R3, #255
73   0150 HERE6:	DJNZ R3, HERE6
74   0152 		DJNZ R4, HERE5
75   0154 		DJNZ R5, HERE4
76   0156 		RET
78   0157 ;======================
