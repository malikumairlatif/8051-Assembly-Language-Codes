;====================================================================
; Main.asm file generated by New Project wizard
;
; Project:	 Seven Segment count using Buttons - 8051
; Created:   Fri May 20 2022
; Processor: AT89C51
; Compiler:  ASEM-51 (Proteus)
; Code by:	ElektroSoft Solutions (SMC-Pvt) Ltd
; Website:	www.essol.com.pk
; Contact:	+92-302-8888-920 (WhatsApp/Call)
; Hardware used: 8051 mini Development Board v1.0 (made by ElektroSoft Solutions)
;====================================================================		
; RESET and INTERRUPT VECTORS
;====================================================================

      ; Reset Vector
      org   0000h
      jmp   Start

;====================================================================
; CODE SEGMENT
;====================================================================		
		ORG 0100H
Start:
		MOV P0, #00H
		MOV P1, #00H
		MOV P2, #00H
		MOV P3, #00H
				
		SETB P3.0		; make Port 3.0 an input
		SETB P3.1		; make Port 3.1 an input
		
		MOV P2, #0FCH	; assigning default value of ZERO by hex value upon initializing
REPEAT:
		MOV DPTR, #COUNT 	; Data Pointer register assigned address
LOOP:	JB P3.0, INCREMENT	; keep monitoring for INCREMENT button press
		JB P3.1, RESETT		; keep monitoring for RESET button press
		SJMP LOOP
		
INCREMENT:					; execute the code if INCREMENT button is pressed
		CLR A				; clear accumulator from any garbage value
		MOVC A, @A+DPTR		; Copy value from current DPTR address to Accumulator
		MOV P2, A			; send data to port 2
		INC DPTR			; increment DPTR address
		CALL DELAY			; debounce delay
		CJNE A, #0FCH, LOOP	; untill ZERO, continue the count on each INCREMENT button press 
		SJMP REPEAT			; if ZERO, then re-initialize DPTR and start count again
		
RESETT:						; execute the code if RESET button is pressed
		MOV P2, #0FCH		; display ZERO on seven segment
		SJMP REPEAT			; re-initialize the count process
		
DELAY:						; delay routine for button debounce
		MOV R5, #5
HERE1:	MOV R4, #200
HERE2:	MOV R3, #255
HERE3:	DJNZ R3, HERE3
		DJNZ R4, HERE2
		DJNZ R5, HERE1
		RET
		
		ORG 0500H			; Data Pointer register address
		
COUNT:	DB	60H, 0DAH, 0F2H, 66H, 0B6H, 0BEH, 0E0H, 0FEH, 0E6H, 0FCH, 0

; Hex values for 1 - 0 decimal values
;
; A | B | C | D | E | F | G | H | = Decimal Value = Hex Value
;
; 0 | 1 | 1 | 0 | 0 | 0 | 0 | 0 | =  1  = 60H
;---------------------------------------------
; 1 | 1 | 0 | 1 | 1 | 0 | 1 | 0 | =  2  = 0DAH
;---------------------------------------------
; 1 | 1 | 1 | 1 | 0 | 0 | 1 | 0 | =  3  = 0F2H
;---------------------------------------------
; 0 | 1 | 1 | 0 | 0 | 1 | 1 | 0 | =  4  = 66H
;---------------------------------------------
; 1 | 0 | 1 | 1 | 0 | 1 | 1 | 0 | =  5  = 0B6H
;---------------------------------------------
; 1 | 0 | 1 | 1 | 1 | 1 | 1 | 0 | =  6  = 0BEH
;---------------------------------------------
; 1 | 1 | 1 | 0 | 0 | 0 | 0 | 0 | =  7  = 0E0H
;---------------------------------------------
; 1 | 1 | 1 | 1 | 1 | 1 | 1 | 0 | =  8  = 0FEH
;---------------------------------------------
; 1 | 1 | 1 | 0 | 0 | 1 | 1 | 0 | =  9  = 0E6H
;---------------------------------------------
; 1 | 1 | 1 | 1 | 1 | 1 | 0 | 0 | =  0  = 0FCH
;---------------------------------------------






























