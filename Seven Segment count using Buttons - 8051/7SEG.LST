1    0000 ;====================================================================
2    0000 ; Main.asm file generated by New Project wizard
3    0000 ;
4    0000 ; Project:	 Seven Segment count using Buttons - 8051
5    0000 ; Created:   Fri May 20 2022
6    0000 ; Processor: AT89C51
7    0000 ; Compiler:  ASEM-51 (Proteus)
8    0000 ; Code by:	ElektroSoft Solutions (SMC-Pvt) Ltd
9    0000 ; Website:	www.essol.com.pk
10   0000 ; Contact:	+92-302-8888-920 (WhatsApp/Call)
11   0000 ; Hardware used: 8051 mini Development Board v1.0 (made by ElektroSoft Solutions)
12   0000 ;====================================================================		
13   0000 ; RESET and INTERRUPT VECTORS
14   0000 ;====================================================================
16   0000       ; Reset Vector
17   0000       org   0000h
18   0000       jmp   Start
20   0003 ;====================================================================
21   0003 ; CODE SEGMENT
22   0003 ;====================================================================		
23   0003 		ORG 0100H
24   0100 Start:
25   0100 		MOV P0, #00H
26   0103 		MOV P1, #00H
27   0106 		MOV P2, #00H
28   0109 		MOV P3, #00H
30   010C 		SETB P3.0		; make Port 3.0 an input
31   010E 		SETB P3.1		; make Port 3.1 an input
33   0110 		MOV P2, #0FCH	; assigning default value of ZERO by hex value upon initializing
34   0113 REPEAT:
35   0113 		MOV DPTR, #COUNT 	; Data Pointer register assigned address
36   0116 LOOP:	JB P3.0, INCREMENT	; keep monitoring for INCREMENT button press
37   0119 		JB P3.1, RESETT		; keep monitoring for RESET button press
38   011C 		SJMP LOOP
40   011E INCREMENT:					; execute the code if INCREMENT button is pressed
41   011E 		CLR A				; clear accumulator from any garbage value
42   011F 		MOVC A, @A+DPTR		; Copy value from current DPTR address to Accumulator
43   0120 		MOV P2, A			; send data to port 2
44   0122 		INC DPTR			; increment DPTR address
45   0123 		CALL DELAY			; debounce delay
46   0126 		CJNE A, #0FCH, LOOP	; untill ZERO, continue the count on each INCREMENT button press 
47   0129 		SJMP REPEAT			; if ZERO, then re-initialize DPTR and start count again
49   012B RESETT:						; execute the code if RESET button is pressed
50   012B 		MOV P2, #0FCH		; display ZERO on seven segment
51   012E 		SJMP REPEAT			; re-initialize the count process
53   0130 DELAY:						; delay routine for button debounce
54   0130 		MOV R5, #5
55   0132 HERE1:	MOV R4, #200
56   0134 HERE2:	MOV R3, #255
57   0136 HERE3:	DJNZ R3, HERE3
58   0138 		DJNZ R4, HERE2
59   013A 		DJNZ R5, HERE1
60   013C 		RET
62   013D 		ORG 0500H			; Data Pointer register address
64   0500 COUNT:	DB	60H, 0DAH, 0F2H, 66H, 0B6H, 0BEH, 0E0H, 0FEH, 0E6H, 0FCH, 0
66   050B ; Hex values for 1 - 0 decimal values
67   050B ;
68   050B ; A | B | C | D | E | F | G | H | = Decimal Value = Hex Value
69   050B ;
70   050B ; 0 | 1 | 1 | 0 | 0 | 0 | 0 | 0 | =  1  = 60H
71   050B ;---------------------------------------------
72   050B ; 1 | 1 | 0 | 1 | 1 | 0 | 1 | 0 | =  2  = 0DAH
73   050B ;---------------------------------------------
74   050B ; 1 | 1 | 1 | 1 | 0 | 0 | 1 | 0 | =  3  = 0F2H
75   050B ;---------------------------------------------
76   050B ; 0 | 1 | 1 | 0 | 0 | 1 | 1 | 0 | =  4  = 66H
77   050B ;---------------------------------------------
78   050B ; 1 | 0 | 1 | 1 | 0 | 1 | 1 | 0 | =  5  = 0B6H
79   050B ;---------------------------------------------
80   050B ; 1 | 0 | 1 | 1 | 1 | 1 | 1 | 0 | =  6  = 0BEH
81   050B ;---------------------------------------------
82   050B ; 1 | 1 | 1 | 0 | 0 | 0 | 0 | 0 | =  7  = 0E0H
83   050B ;---------------------------------------------
84   050B ; 1 | 1 | 1 | 1 | 1 | 1 | 1 | 0 | =  8  = 0FEH
85   050B ;---------------------------------------------
86   050B ; 1 | 1 | 1 | 0 | 0 | 1 | 1 | 0 | =  9  = 0E6H
87   050B ;---------------------------------------------
88   050B ; 1 | 1 | 1 | 1 | 1 | 1 | 0 | 0 | =  0  = 0FCH
89   050B ;---------------------------------------------
